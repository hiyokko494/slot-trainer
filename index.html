
<!DOCTYPE html>

<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>スロット ビタ押し練習</title>
<style>
    body {
      font-family: sans-serif;
      background: #f7f7f7;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .machine {
      display: flex;
      margin-top: 30px;
    }
    .reel {
      width: 100px;
      height: 300px;
      margin: 0 10px;
      overflow: hidden;
      border: 2px solid #333;
      background: #fff;
      position: relative;
    }
    .symbols {
      position: absolute;
      width: 100%;
    }
    .symbol {
      width: 100%;
      height: 100px; font-size: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      font-weight: bold;
    }
    .blue { color: blue; }
    .red { color: red; }
    .black { color: black; }
    .controls {
      margin-top: 20px;
    }
    button {
      margin: 0 5px;
      padding: 10px 20px;
      font-size: 16px;
    }
    .message {
      position: absolute;
      top: 120px;
      width: 100%;
      text-align: center;
      font-size: 18px;
      font-weight: bold;
    }
    .great { color: red; }
    .early { color: green; }
    .late { color: blue; }
  </style>
</head>
<body>
<h1>スロット ビタ押し練習</h1>
<div class="machine">
<div class="reel">
<div class="symbols" id="symbols0"></div>
<div class="message" id="msg0"></div>
</div>
<div class="reel">
<div class="symbols" id="symbols1"></div>
<div class="message" id="msg1"></div>
</div>
<div class="reel">
<div class="symbols" id="symbols2"></div>
<div class="message" id="msg2"></div>
</div>
</div>
<div class="controls">
<button onclick="start()">スタート</button>
<button onclick="stop(0)">STOP 1</button><button onclick="stop(1)">STOP 2</button><button onclick="stop(2)">STOP 3</button>
</div>
<script>
    const reels = [[], [], []];
    const symbols = ['','', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];
    const targets = ['7', 'BAR', '7'];
    const colors = ['blue', 'black', 'red'];
    const positions = [0, 0, 0];
    const intervals = [null, null, null];

    function buildReel(i) {
      let reel = document.getElementById('symbols' + i);
      reel.innerHTML = '';
      for (let j = 0; j < 21; j++) {
        const div = document.createElement('div');
        div.className = 'symbol';
        if (j === 10) {
          div.textContent = targets[i];
          div.classList.add(colors[i]);
        } else {
          div.textContent = '';
        }
        reel.appendChild(div);
      }
    }

    function start() {
      for (let i = 0; i < 3; i++) {
        let reel = document.getElementById('symbols' + i);
        positions[i] = 0;
        intervals[i] = setInterval(() => {
          positions[i] = (positions[i] + 1) % 21;
          reel.style.top = (-positions[i] * 100) + 'px';
        }, 47); // 21コマで1秒
        document.getElementById('msg' + i).textContent = '';
      }
    }

    function stop(i) {
      clearInterval(intervals[i]);
      let diff = (10 - positions[i] + 21) % 21;
      let msg = document.getElementById('msg' + i);
      if (diff === 0) {
        msg.textContent = 'Great!';
        msg.className = 'message great';
      } else if (diff <= 10) {
        msg.textContent = diff + 'コマ早い！';
        msg.className = 'message early';
      } else {
        msg.textContent = (21 - diff) + 'コマ遅い！';
        msg.className = 'message late';
      }
    }

    window.onload = () => {
      for (let i = 0; i < 3; i++) {
        buildReel(i);
        document.getElementById('symbols' + i).style.top = '-1000px'; // 初期状態：10番目を下段
      }
    };
  </script>
</body>
</html>
